<!DOCTYPE html>
<html>
<head>
  <title>Zoe's Animal Quetionnaire!</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="screen.css">

  <script type="text/javascript">
    // Create an array of our animals
    const animals = [
      { name: "panda", fullName: "Red Panda", emoji: "🐼" },
      { name: "fish", fullName: "Beta Fish", emoji: "🐟" },
      { name: "bear", fullName: "Polar Bear", emoji: "🐻" },
      { name: "squirrel", fullName: "Squirrel", emoji: "🐿" },
      { name: "osprey", fullName: "Osprey", emoji: "🦅" },
      { name: "iguana", fullName: "Iguana", emoji: "🦎" },
      { name: "bobcat", fullName: "Bobcat", emoji: "🐈" },
      { name: "zebra", fullName: "Zebra", emoji: "🦓" }
    ]

    // Store answers as they roll in
    let answers = []
    let animal = null
    let selectedAnswers = null

    // Click the button to tabulate your result
    $(document).on("click", "[data-behavior~=tabulate-result]", function(event) {
      event.preventDefault()

      // Find all selected answers
      selectedAnswers = $('input[type=radio]:checked')

      // Add the selections to the answers array
      selectedAnswers.each(function(){
        answers.push(this.value.split(","))
      })

      // Get the most common animal across your answers
      animal = mode([].concat.apply([], answers))

      // Display your animal
      alert("You're a: " + getAnimal(animal).fullName)

      // Reset the form
      $('form').get(0).reset()

      // Reset the animals array
      answers = []
    })


    // Find the full name and emoji of the selected animal
    function getAnimal(animal) {
      return animals.find(function(obj) { return obj.name === animal })
    }

    // Find the most frequent, unique item in the merged array
    function mode(arr) {
      return arr.sort((a,b) =>
          arr.filter(v => v===a).length
        - arr.filter(v => v===b).length
      ).pop()
    }
  </script>
</head>

<body>
  <div class="container">
    <h1>Which Animal are You?</h1>
    <p>
      Answer the questions below and we’ll figure out which animal you are.
      Be sure to answer every question so the zookeeper can do her magic!
    </p>

    <form action="#" method="" id="animalForm">
      <section class="question">
        <fieldset>
          <legend><strong>Do you like mammals?</strong></legend>
          <dl>
            <dd><label><input type="radio" name="question[mammals]" value="panda,bear,squirrel,bobcat,zebra"> Yes</label></dd>
            <dd><label><input type="radio" name="question[mammals]" value="fish,osprey,iguana"> No</label></dd>
          </dl>
        </fieldset>
      </section>

      <section class="question">
        <fieldset>
          <legend><strong>Which cat do you like better?</strong></legend>
          <dl>
            <dd><label><input type="radio" name="question[bigcats]" value="fish,bobcat"> Tigers</label></dd>
            <dd><label><input type="radio" name="question[bigcats]" value="zebra,bobcat"> Cheetahs</label></dd>
            <dd><label><input type="radio" name="question[bigcats]" value="iguana,bobcat"> Jaguars</label></dd>
          </dl>
        </fieldset>
      </section>

      <section class="question">
        <fieldset>
          <legend><strong>Which reptile do you like better?</strong></legend>
          <dl>
            <dd><label><input type="radio" name="question[reptiles]" value="iguana,osprey"> Alligator</label></dd>
            <dd><label><input type="radio" name="question[reptiles]" value="iguana,jaguar"> Crocodile</label></dd>
            <dd><label><input type="radio" name="question[reptiles]" value="iguana,squirrel"> Turtle</label></dd>
          </dl>
        </fieldset>
      </section>

      <section class="question">
        <fieldset>
          <legend><strong>Do you like rodents?</strong></legend>
          <dl>
            <dd><label><input type="radio" name="question[rodents]" value="squirrel"> Yes</label></dd>
            <dd><label><input type="radio" name="question[rodents]" value="panda,fish,bear,osprey,iguana,bobcat,zebra"> No</label></dd>
          </dl>
        </fieldset>
      </section>

      <section class="question">
        <fieldset>
          <legend><strong>What's better?</strong></legend>
          <dl>
            <dd><label><input type="radio" name="question[texture]" value="iguana"> Leathery</label></dd>
            <dd><label><input type="radio" name="question[texture]" value="osprey"> Feathery</label></dd>
            <dd><label><input type="radio" name="question[texture]" value="panda,bear,squirrel,bobcat,zebra"> Fuzzy</label></dd>
            <dd><label><input type="radio" name="question[texture]" value="fish"> Slippery</label></dd>
          </dl>
        </fieldset>
      </section>

      <section class="question">
        <fieldset>
          <legend><strong>Where would you rather live?</strong></legend>
          <dl>
            <dd><label><input type="radio" name="question[location]" value="bear"> In the Arctic</label></dd>
            <dd><label><input type="radio" name="question[location]" value="fish,iguana,zebra"> At the equator</label></dd>
            <dd><label><input type="radio" name="question[location]" value="panda,osprey,squirrel,bobcat"> Somewhere in between</label></dd>
          </dl>
        </fieldset>
      </section>

      <section class="question">
        <fieldset>
          <legend><strong>Are you a day person or a nigh person?</strong></legend>
          <dl>
            <dd><label><input type="radio" name="question[daynight]" value="bear,osprey,squirrel,bobcat,fish,iguana,zebra"> Day</label></dd>
            <dd><label><input type="radio" name="question[daynight]" value="panda"> Night</label></dd>
          </dl>
        </fieldset>
      </section>

      <section class="question">
        <fieldset>
          <legend><strong>Which is tastier?</strong></legend>
          <dl>
            <dd><label><input type="radio" name="question[taste]" value="bear,bobcat,osprey,fish"> Meat</label></dd>
            <dd><label><input type="radio" name="question[taste]" value="zebra"> Vegetables &amp; Grass</label></dd>
            <dd><label><input type="radio" name="question[taste]" value="iguana"> Insects</label></dd>
            <dd><label><input type="radio" name="question[taste]" value="panda,squirrel"> Twigs &amp; Berries</label></dd>
          </dl>
        </fieldset>
      </section>

      <footer class="submit-buttons">
        <p>
          <input type="submit" value="Sort me now!" data-behavior="tabulate-result">
        </p>
      </footer>
    </form>
  </div>
</body>
